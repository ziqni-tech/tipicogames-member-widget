<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8">
    <title>Home - Documentation</title>


    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >

    <input type="text" id="nav-search" placeholder="Search" />

    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="cLabs.Ajax.html">Ajax</a><ul class='methods'><li data-type='method' style='display: none;'><a href="cLabs.Ajax.html#.abort">abort</a></li><li data-type='method' style='display: none;'><a href="cLabs.Ajax.html#.getData">getData</a></li></ul></li><li><a href="LbWidget.html">LbWidget</a><ul class='members'><li data-type='member' style='display: none;'><a href="LbWidget.html#.this.settings">this.settings</a></li><li data-type='member' style='display: none;'><a href="LbWidget.html#~competitionCheckAjax">competitionCheckAjax</a></li><li data-type='member' style='display: none;'><a href="LbWidget.html#~competitionFinishedCheckAjax">competitionFinishedCheckAjax</a></li></ul><ul class='methods'><li data-type='method' style='display: none;'><a href="LbWidget.html#.this.formatDateTime">this.formatDateTime</a></li><li data-type='method' style='display: none;'><a href="LbWidget.html#.this.init">this.init</a></li><li data-type='method' style='display: none;'><a href="LbWidget.html#.this.openWithTabAndAction">this.openWithTabAndAction</a></li></ul></li><li><a href="MainWidget.html">MainWidget</a><ul class='members'><li data-type='member' style='display: none;'><a href="MainWidget.html#.this.settings">this.settings</a></li></ul><ul class='methods'><li data-type='method' style='display: none;'><a href="MainWidget.html#.this.accordionStyle">this.accordionStyle</a></li></ul></li><li><a href="Messaging.html">Messaging</a><ul class='members'><li data-type='member' style='display: none;'><a href="Messaging.html#.this.settings">this.settings</a></li></ul><ul class='methods'><li data-type='method' style='display: none;'><a href="Messaging.html#.this.hearBeatCheck">this.hearBeatCheck</a></li></ul></li><li><a href="MiniScoreBoard.html">MiniScoreBoard</a><ul class='members'><li data-type='member' style='display: none;'><a href="MiniScoreBoard.html#.this.settings">this.settings</a></li></ul></li><li><a href="Notifications.html">Notifications</a><ul class='members'><li data-type='member' style='display: none;'><a href="Notifications.html#.this.settings">this.settings</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-utils.html">utils</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils.html#._hasClass">_hasClass</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#.addClass">addClass</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#.closest">closest</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#.formatNumberLeadingZeros">formatNumberLeadingZeros</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#.isElement">isElement</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#.objectCount">objectCount</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#.objectIterator">objectIterator</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#.query">query</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#.remove">remove</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#.removeClass">removeClass</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#.scrollEnabled">scrollEnabled</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#.sizeof">sizeof</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#.stringContains">stringContains</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#.stripHtml">stripHtml</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#getData">getData</a></li></ul>
</nav>

<div id="main">









    <section class="package">
        <h3> </h3>
    </section>













    <section class="readme usertext">
        <article><p align="center">
</p>
<h1 id="gamification-ux-package">Gamification UX package</h1>
<p>HTML/CSS and Vanilla JavaScript Ziqni Leaderboard / Achievements / Inbox-Messaging widget</p>
<p align="center">
    <img width="500" src="https://ziqni.cdn.ziqni.com/ziqni-tech/gamification-ux-package/_widgets/mini-scoreboard-animation.gif"><br/>
</p>
<p>Our widget &quot;out of the box&quot; is a product that you can use immediately by placing it on your existing game, on your website or include it into your Node project directly or anything that you need it to be used for. The widget is fully editable, re-adjustable, multilingual (all languages are supported), units of measure are also auto-generated by the system (all the currencies are pre defined in your private space) and it is a complementary product that gives the player a full in-depth gaming experience. All you have to do is:</p>

<h2 id="installation">Installation</h2>
<p>The Leaderboard Widget package lives in <a href="https://www.npmjs.com/get-npm">npm</a>. To install the latest stable version, run the following command:</p>
<pre class="prettyprint source lang-sh"><code>npm install @ziqni-tech/gamification-ux-package
</code></pre>
<p>Or if you're using <a href="https://classic.yarnpkg.com/en/docs/install/">yarn</a>:</p>
<pre class="prettyprint source lang-sh"><code>yarn add @ziqni-tech/gamification-ux-package
</code></pre>
<h2 id="build">Build</h2>
<h4 id="prerequisites">Prerequisites</h4>
<ul>
<li>NodeJS &gt;= 10.10</li>
<li>NPM &gt;= 6.x</li>
</ul>
<p>Install the dependencies.</p>
<pre class="prettyprint source lang-sh"><code>npm install
</code></pre>
<p>Run <code>npm run build</code> to generate production files inside <code>build</code>.</p>
<pre class="prettyprint source lang-sh"><code>npm run build
</code></pre>
<p>You can include css file into the bundle by running one of the commands (images will also be compiled into base64 format):</p>
<pre class="prettyprint source lang-sh"><code>npm run dev -- --inlineCss=true
npm run build -- --inlineCss=true
</code></pre>
<p>Or run <code>npm run dev</code> to build widget in development mode.</p>
<pre class="prettyprint source lang-sh"><code>npm run dev
</code></pre>
<h4 id="coding-standards">Coding standards</h4>
<p>Code formatting rules are defined in <code>.eslintrc</code>. You can check your code against these standards by running:</p>
<pre class="prettyprint source lang-sh"><code>npm run lint
</code></pre>
<p>To automatically fix any style violations in your code, you can run:</p>
<pre class="prettyprint source lang-sh"><code>npm run lint -- --fix
</code></pre>
<h4 id="running-tests">Running tests</h4>
<p>You can run the test suite using the following command:</p>
<pre class="prettyprint source lang-sh"><code>npm run test
</code></pre>
<p>Run <code>npm run test:coverage</code> to open coverage report</p>
<pre class="prettyprint source lang-sh"><code>npm run test:coverage
</code></pre>
<p>Please ensure that the tests are passing when submitting a pull request.</p>
<h4 id="documentation">Documentation</h4>
<p>You can generate documentation by running:</p>
<pre class="prettyprint source lang-sh"><code>npm run jsdoc
</code></pre>
<h2 id="different-themes">Different themes</h2>
<p>There are a few themes to choose from (or create your own):</p>
<p>Build default theme:</p>
<pre class="prettyprint source lang-shell"><code>npm run dev
</code></pre>
<p>Build dark theme:</p>
<pre class="prettyprint source lang-shell"><code>npm run dev:dark-theme
</code></pre>
<p>Build blue theme:</p>
<pre class="prettyprint source lang-shell"><code>npm run dev:blue-theme
</code></pre>
<p>Build green theme:</p>
<pre class="prettyprint source lang-shell"><code>npm run dev:green-theme
</code></pre>
<p>Build grey theme:</p>
<pre class="prettyprint source lang-shell"><code>npm run dev:grey-theme
</code></pre>
<p>Build red theme:</p>
<pre class="prettyprint source lang-shell"><code>npm run dev:red-theme
</code></pre>
<p>Build orange theme:</p>
<pre class="prettyprint source lang-shell"><code>npm run dev:orange-theme
</code></pre>
<p>Build black theme:</p>
<pre class="prettyprint source lang-shell"><code>npm run dev:black-theme
</code></pre>
<p>Grey refresh theme:</p>
<pre class="prettyprint source lang-shell"><code>npm run dev:grey-theme-refresh
</code></pre>
<h2 id="layouts">Layouts</h2>
<p>Layouts is a new development helper view that has examples of all the different variations of the widget in a static format.<br>
This features is really helpful in creating new theme designs and testing different theme configuration structures.</p>
<pre class="prettyprint source lang-shell"><code>npm run dev:layouts -- --theme=grey-theme-refresh
</code></pre>
<h4 id="command-parameters%3A">Command parameters:</h4>
<table>
    <tr>
        <th align="left">Parameters</th>
        <th align="left">Value</th>
        <th align="left">Description</th>
        <th align="left">Example</th>
    </tr>
    <tr>
        <td>inlineCss</td>
        <td>yes/no</td>
        <td>Forces css to be compiled into the bundle</td>
        <td>--inlineCss=true</td>
    </tr>
    <tr>
        <td>theme</td>
        <td>[theme name]</td>
        <td>Tells the rendered what theme to package and render</td>
        <td>--theme=grey-theme-refresh</td>
    </tr>
</table>
<h4 id="themes%3A">Themes:</h4>
<p>Style 1&quot;</p>
<ul>
<li>cl-style-1-light-theme</li>
<li>cl-style-1-dark-theme</li>
</ul>
<p>Style 2:</p>
<ul>
<li>cl-style-2-default-theme</li>
<li>cl-style-2-dark-theme</li>
<li>cl-style-2-blue-theme</li>
<li>cl-style-2-green-theme</li>
<li>cl-style-2-grey-theme</li>
<li>cl-style-2-red-theme</li>
<li>cl-style-2-orange-theme</li>
<li>cl-style-2-black-theme</li>
</ul>
<h2 id="examples">Examples</h2>
<p>Running the project in dev mode will initialise with an example page.</p>
<table style="border:none;">
    <tr>
        <td>
            <img width="250" src="https://ziqni.cdn.ziqni.com/ziqni-tech/gamification-ux-package/_widgets/3.png" />
        </td>
        <td>
            <img width="214" src="https://ziqni.cdn.ziqni.com/ziqni-tech/gamification-ux-package/_widgets/2.png" />
        </td>
        <td>
            <img width="250" src="https://ziqni.cdn.ziqni.com/ziqni-tech/gamification-ux-package/_widgets/1.png" />
        </td>
    </tr>
</table>
<h2 id="adding-widget-to-your-website">Adding widget to your website</h2>
<pre class="prettyprint source lang-html"><code>&lt;script type=&quot;text/javascript&quot;>
	(function(w,d,s,u,o){
    		w[o] = {
    			apiKey: '&lt;api_key>',
    			spaceName: '&lt;space_name>',
    			gameId: &quot;&lt;game_name>&quot;,
    			memberId: '&lt;member_reference_id>',
    			language: &quot;en&quot;,
    			uri: {
    				gatewayDomain: &quot;https://gateway.ziqni.com&quot;,
    				translationPath: &quot;https://ziqni.cdn.ziqni.com/ziqni-tech/gamification-ux-package/_widgets/gamification-ux-package/i18n/translation_:language.json&quot;
    			},
    			resources: [
    				&quot;https://ziqni.cdn.ziqni.com/ziqni-tech/gamification-ux-package/_widgets/gamification-ux-package/build/css/theme/cl-style-1-default-theme.css&quot;
    			]
    		};
    		var a=d.createElement(s), m=d.getElementsByTagName(s)[0];
    		a.async=1;a.src=u;m.parentNode.insertBefore(a,m);
    	})(window,document,'script','https://ziqni.cdn.ziqni.com/ziqni-tech/gamification-ux-package/_widgets/gamification-ux-package/build/javascript/ziqni-member-widget.js',&quot;_CLLBV3Opt&quot;);
&lt;/script>
</code></pre>
<h2 id="using-the-loader-script">Using the loader script</h2>
<p>You can use this loader script to centralise all your widget loading needs (custom scripts, styles and environmental parameters) into a single place.<br>
The &quot;Loader&quot; script requires the bear minimum of 2 things to be set to the global <code>window._CLLBV3Opt</code> parameter before the scripts loads:</p>
<ol>
<li><code>gameId</code></li>
<li><code>memberId</code></li>
</ol>
<pre class="prettyprint source lang-html"><code>&lt;script type=&quot;text/javascript&quot;>
    window._CLLBV3Opt = {
        gameId: &quot;my_game_id&quot;,
        memberId: &quot;my_member_id&quot;
    };
&lt;/script>
</code></pre>
<h4 id="steps-required-to-configure-the-loader-script%3A">Steps required to configure the loader script:</h4>
<ol>
<li>update your default API key, space name (optional: <code>language</code> and <code>currency</code>), unless you are loading the API key and space name from your game/product</li>
<li>define what products will load in the widget:</li>
</ol>
<pre class="prettyprint source lang-javascript"><code>products: {
    &quot;my_product_id&quot;: {
        script: &quot;https://my.custom.script.location&quot;,
        resources: [
            &quot;https://my.custom.stylesheet.location&quot;
        ],
        onBeforeLoad: function( instance, options, callback ){ // your custom logic before the widget gets initialised/rendered
            if( typeof callback === &quot;function&quot; ) callback();
        }
    },
    &quot;my_product_id_2&quot;: {}
}
</code></pre>
<ol start="3">
<li>add loader script to your website</li>
</ol>
<h2 id="faq">FAQ</h2>
<h3 id="how-do-i-set-the-currency%3A">How do I set the currency:</h3>
<p>The setting &quot;currency&quot; needs to be set to the appropriate ISO key used in units of measure section</p>
<pre class="prettyprint source lang-text"><code>{
  currency: &quot;usd&quot;
}
</code></pre>
<h3 id="how-do-i-specify-a-custom-stylesheet%3A">How do I specify a custom stylesheet:</h3>
<p>All styles are loaded as part of the initialisation, so overwriting the resources array variable with your stylesheet asset will allow you to load in the external stylesheets dynamically.<br>
There is no limit to how many stylesheets you can add as the widget will load all of them from the specified array.</p>
<h3 id="how-to-show-game%2Fproduct-specific-competitions-only%3A">How to show game/product specific competitions only:</h3>
<pre class="prettyprint source lang-text"><code>The setting &quot;enforceGameLookup&quot; should be set to &quot;true&quot; and game/product ID should be assigned to the setting entry &quot;gameId&quot; part of the widget startup/initialisation
{
  enforceGameLookup: true,
  gameId: &quot;my_id&quot;
}
</code></pre>
<h3 id="how-to-disable-inbox%2Fmessaging-section%3A">How to disable Inbox/Messaging section:</h3>
<pre class="prettyprint source lang-text"><code>To disable the inbox/messaging area on the full widget preview the following setting &quot;messages.enabled&quot; has to be set to &quot;false&quot;:
{
  messages: {
      enable: false
  }
}
</code></pre>
<h3 id="how-to-show-the-widget-only-if-there-are-any-available-competitions%3A">How to show the widget only if there are any available competitions:</h3>
<pre class="prettyprint source lang-text"><code>The primary method “this.startup“ inside the &quot;LbWidget&quot; class is the one you should adjust to implement your scenario to achieve a pre-launch check, you can wrap what's inside of that method with the function:
this.checkForAvailableCompetitions()
This method collects all the necessary information about active, ready and finished competitions (example: _this.settings.tournaments.readyCompetitions will contain a list of upcoming competitions) so you can use the callback and the collected information to decide to show or hide the mini-scoreboard on startup based on your requirements.
</code></pre>
<h3 id="how-do-i-only-show-the-competition-tab-if-there-is-an-active-competition-only-and%2For-change-the-default-tab-to-the-achievements-tab">How do I only show the competition tab if there is an active competition only and/or change the default tab to the achievements tab</h3>
<p>The current flow is:</p>
<ol>
<li>once the mini scoreboard is clicked, the main layout gets initialized (unless it’s already not existing in the DOM)</li>
<li>the navigation then gets reset to the initial competition tab</li>
</ol>
<p>To achieve this scenario you would need to do an available competition check prior to the navigation reset and then hide/show tabs accordingly based on your business requirement.<br>
The code of interest would be on line inside the method called: &quot;this.initLayout&quot; in the &quot;MainWidget&quot; widget class, the method that resets the navigation is &quot;_this.resetNavigation( callback )&quot; this handles what navigation item to set as default for the user.<br>
You can either change this code directly or override that method after initialization inside the &quot;this.startup&quot; method for the class &quot;LbWidget&quot; by doing the following &quot;_this.settings.mainWidget.resetNavigation = function(callback){}&quot;.<br>
There you can write some logic that would check what tabs to show/hide.<br>
Or you can overwrite this on a more global scope level where you initialize the widget &quot;new LbWidget(window._CLLBV3Opt)&quot; as you get full access to the settings and all other methods.</p>
<h3 id="localization---how-do-i-translate-the-widget-ui%3A">Localization - How do I translate the widget UI:</h3>
<p>To enable translation the following steps need to be made:</p>
<ol>
<li>Translate your UI elements to the appropriate language and save it in a &quot;.json&quot; format using the following naming pattern <code>translation_en.json</code> <a href="https://ziqni.cdn.ziqni.com/ziqni-tech/gamification-ux-package/_widgets/gamification-ux-package/i18n/translation_en.json">JSON example</a></li>
<li>The translations you define inside the file will be merged with the core translations on run time</li>
</ol>
<pre class="prettyprint source lang-text"><code>* The default widget language is set to english &quot;en&quot;, the widget will try to load look for an external translation
resource based on the language setting and the &quot;translationPath&quot;

* If the resource path is used as &quot;translation_:language.json&quot; the widget script will try to replace &quot;:language&quot; with the
current language  setting and load the translation dynamically from an external source, example:
https://ziqni.cdn.ziqni.com/ziqni-tech/gamification-ux-package/_widgets/gamification-ux-package/i18n/translation_:language.json

* If translations are not required it is possible to disable them by changing &quot;loadTranslations&quot; setting to &quot;false&quot;
</code></pre>
<h3 id="why-we-use-sass%3A">Why we use SASS:</h3>
<p>Here are some of the basic benefits of why we are using SASS:</p>
<ul>
<li>provides the ability to use variables, allows you to store a value, or a set of values, and to reuse these variables throughout your SASS files as many times you want and wherever you want. Easy, powerful, and useful.</li>
<li>the improved syntax allows you to use a nested syntax, which is code contained within another piece of code that performs a wider function</li>
<li>provides mixin functionality: Mixins are like functions in other programming languages. They return a value or set of values and can take parameters including default values.</li>
<li>allows you to break apart your big complex CSS files into smaller chunks, this improves the ability to work on the same stylesheets for multiple teams</li>
<li>still supports the basic CSS syntax as SCSS syntax is CSS compatible</li>
</ul>
<h3 id="ie11-support">IE11 support</h3>
<p>Internet explorer 11 support is limited, at the moment styling and one of the libraries will need to be adjusted for full IE11 support which will require a review and update on the code where necessary.<br>
To get the code to compile we recommend to:</p>
<ol>
<li>inside the <code>src/javascript/modules/LbWidget.js</code> to remove/change the <code>import jsSHA from 'jssha'</code> import to the local library <code>import jsSHA from '../utils/jsSHA'</code></li>
<li>inside the method <code>populateIdenticonBase64Image</code> update the jsSHA implementation from:</li>
</ol>
<pre class="prettyprint source lang-javascript"><code>var shaObj = new jsSHA('SHA-512', 'TEXT');
shaObj.update(str);
var hash = shaObj.getHash('HEX', 1);
</code></pre>
<p>to:</p>
<pre class="prettyprint source lang-javascript"><code>var shaObj = new jsSHA(str, 'TEXT');
var hash = shaObj.getHash('SHA-512', 'HEX', 1);
</code></pre></article>
    </section>








</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.6</a> using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>